import java.util.ArrayList;

import com.google.gson.Gson;

/*
 * This class queries OpenWeatherMap to determine weather for
 * specific location
 */
public class OpenWeatherMapAPI {
	
	private static final String APIkey = "61544e3e538b756d02b74bdc831e7c2b";
	
	static class ZipCode {
	    Coord coord;
	    Sys sys;
	    ArrayList<Weather> weather = new ArrayList<Weather>();
	    String base;
	    Main main;
	    Wind wind;
	    Clouds clouds;
	    double dt;
	    int id;
	    String name;
	    int cod;
	}
	
	static class Coord {
		double lon;
		double lat;
	}
	
	static class Sys {
		int type;
		int id;
		double message;
		String country;
		int sunrise;
		int sunset;
	}
	
	static class Weather {
		int id;
		String main;
		String description;
		String icon;
	}
	
	static class Main {
		double temp;
		double humidity;
		double pressure;
		double temp_min;
		double temp_max;
	}
	
	static class Wind {
		double speed;
		double deg;
	}
	
	static class Clouds {
		double all;
	}
	
	public void convertFromJson(String zip, String countryCode) {
		String json;
		try {
			json = UrlReader.readUrl("http://api.openweathermap.org/data/2.5/weather?zip=" + zip + "," + countryCode + "&APPID=" + APIkey);
			Gson gson = new Gson();        
			ZipCode zipCode = gson.fromJson(json, ZipCode.class);
			
			System.out.println(zipCode.name);
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		
	}
	
	public static void main() {
		OpenWeatherMapAPI owm = new OpenWeatherMapAPI();
		owm.convertFromJson("92109", "us");
	}

}
